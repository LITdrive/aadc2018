# AADC 2018 - LITdrive

This is the main folder for the ADTF plugin development and the running of ADTF projects and contains all the delivered sources.

## Additional libraries

The following additional libraries need to be installed on the car.

### ZeroMQ

ZeroMQ is a low-overhead, low-latency, high-speed IPC library, which is used for pumping sensor data to a message queue and receiving it with another program, e.g. Python.

    cd /opt
    sudo git clone https://github.com/zeromq/libzmq.git
    sudo chown -R aadc:aadc libzmq
    cd /opt/libzmq
    mkdir build; cd build
    cmake ..
    make
	
On Windows, do the following:

	cd C:\SDKs
	git clone https://github.com/zeromq/libzmq.git
	md build; cd build
	cmake -G "Visual Studio 14 2015 Win64" ..
	cmake --build . --target INSTALL --config Release

### Nvidia Driver 396.xx

**Linux-only!**

    sudo add-apt-repository ppa:graphics-drivers/ppa
    sudo apt update
    sudo apt install nvidia-396

Restart machine and check with

    nvidia-smi

### Eigen 3.3.4

**Linux-only!** Download the precompiled archive from [here](https://drive.google.com/file/d/1m8tXbVHjtSuV_cpZmR51T1Z4Kzz9et-3/view?usp=sharing), extract and copy this to `/opt/eigen/3.3.4` (such that you have `share` and `include` folders in there). Next, configure the shared library.

### Protobuf 3.5.0

**Linux-only!** We need to build Protobuf. Prepare the environment with

    sudo apt-get update
    sudo apt-get install autoconf automake libtool curl make g++ unzip

Next, download and extract the package

    cd /opt
    sudo wget https://github.com/protocolbuffers/protobuf/releases/download/v3.5.1/protobuf-cpp-3.5.1.tar.gz -O /tmp/protobuf.tar.gz
    sudo mkdir protobuf
    sudo tar -xzf /tmp/protobuf.tar.gz -C protobuf
    sudo chown -R aadc:aadc protobuf

Next, configure, make, install and update the shared library path

    cd /opt/protobuf/protobuf-3.5.1
    chmod +x configure
    ./configure
    make -j5
    make check -j5
    sudo make install
    sudo ldconfig

The libraries should have been installed to `/usr/local/lib`, you can check this with

    ls /usr/local/lib/ | grep proto

### Tensorflow 1.8.0

**Linux-only!** Download the precompiled archive from [here](https://drive.google.com/file/d/1lY8VUlROLTkavQFePoHVidur-TpKr1fj/view?usp=sharing), extract and copy this to `/opt/tensorflow/1.8.0` (such that you have `external`, `include` and `lib` folders in there). Next, configure the shared library.

    echo '/opt/tensorflow/1.8.0/lib' | sudo tee /etc/ld.so.conf.d/tensorflow.conf
    sudo ldconfig

## Structure

### Folders

- `_build_user:` temporary folder which is generated by calling `build_user.sh` or `build_user_win.bat` and is used while building plugins
- `_build_base:` temporary folder which is generated by calling `build_base.sh` or `build_base_win.bat` and is used while building plugins
- `_build_demo:` temporary folder which is generated by calling `build_demo.sh` or `build_demo_win.bat` and is used while building plugins
- `_install:` temporary folder which is generated in build process and contains all the generated binaries
- `config:` Some demo ADTF configurations can be found here
- `configuration_files:` Here a lot of useful files located, e.g. calibration files for the camera, an example of a manueverlist and many more
- `doc:` Documentation folder
- `include:` Some general sources are located here which are used by all projects
- `src/aadcUser:` Here are some template plugins for the teams located. The teams are advised to include all their filters in this project.
- `src/aadcBase:` In the base folder are the ADTF base plugins contained which must be used by all teams. The final project running at the competition must contain these filters.
- `src/aadcDemo:` Here are a lot of demo filters  contained which can be used by the teams or can also be modified by the teams on their own.

### Files

- `build_user.sh:` Builds and compiles the sources contained in `src/aadcUser` for Linux
- `build_base.sh:` Builds and compiles the sources contained in `src/aadcBase` for Linux
- `build_demo.sh:` Builds and compiles the sources contained in `src/aadcDemo` for Linux
- `build_user_win.bat:` Builds and compiles the sources contained in `src/aadcUser` for windows
- `build_base_win.bat:` Builds and compiles the sources contained in `src/aadcBase` for windows
- `build_demo_win.bat:` Builds and compiles the sources contained in `src/aadcDemo` for windows
- `AADCConfig.cmake:` configuration file for CMake which configures are all the used SDKs
- `AADC_PRIVATE.cmake:` contains some macros for use in CMake
- `AADCConfigVersion.cmake:` holds the version numbers of the current source
- `changelog.txt:` overview of the changes in source
- `LICENSE.txt:` license information
- `README.txt:` this file
